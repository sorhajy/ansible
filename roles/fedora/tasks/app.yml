---

- name: Install base packages
  dnf:
    name: "{{ packages }}"
    state: present
  vars:
    packages:
      - firefox
      - gparted
      - gnome-tweaks
      - gnome-extensions-app
      - kdiskmark
      - gnome-boxes
      - gnome-system-monitor
      - gsmartcontrol
      - android-file-transfer
      - corectrl

- name: Install file managing & share packages
  dnf:
    name: "{{ packages }}"
    state: present
  vars:
    packages:
      - syncthing
      - persepolis

- name: Install KVM packages
  dnf:
    name: "{{ packages }}"
    state: present
  vars:
    packages:
      - qemu
      - qemu-kvm
      - libvirt-daemon
      - libvirt
      - libvirt-devel
      - ebtables
      - virt-manager
      - bridge-utils

- name: Start & enable libvirt
  service:
    name: "{{ item }}"
    state: started
    enabled: yes
  with_items:
  - libvirtd-admin.socket
  - libvirtd-tls.socket
  - libvirtd.socket
  - libvirtd-ro.socket
  - libvirtd-tcp.socket
  - virtnetworkd-ro.socket
  - virtnetworkd-admin.socket
  - virtnetworkd.socket

- name: Install vagrant
  dnf:
    name: vagrant
    state: present

- name: Install wine & steam
  dnf:
    name: "{{ packages }}"
    state: present
  vars:
    packages:
      - wine
      - playonlinux
      - steam
