---

- name: Install base packages
  dnf:
    name: "{{ packages }}"
    state: present
  vars:
    packages:
      - gparted
      - flameshot
      - gnome-tweaks
      - gnome-extensions-app
      - kdiskmark
      - firefox
      - chromium
      - torbrowser-launcher
      - telegram-desktop
      - pidgin
      - meld
      - geany
      - keepassxc
      - electrum
      - copyq
      - remmina
      - remmina-gnome-session
      - remmina-plugins-rdp
      - remmina-plugins-vnc
      - vlc
      - HandBrake-gui
      - gnome-boxes
      - gnome-system-monitor
      - gsmartcontrol
      - https://dbeaver.io/files/dbeaver-ce-latest-stable.x86_64.rpm
      - deja-dup
      - wireshark

- name: Install office apps
  dnf:
    name: "{{ packages }}"
    state: present
  vars:
    packages:
    - gnome-calendar
    - libreoffice
    - thunderbird
    - gnome-todo

- name: Install file managing & share packages
  dnf:
    name: "{{ packages }}"
    state: present
  vars:
    packages:
      - syncthing
      - persepolis
      - transmission
      - filezilla
      - onionshare

- name: Install KVM packages
  dnf:
    name: "{{ packages }}"
    state: present
  vars:
    packages:
      - qemu
      - qemu-kvm
      - libvirt-daemon
      - libvirt
      - libvirt-devel
      - ebtables
      - virt-manager
      - bridge-utils

- name: Start & enable libvirt
  service:
    name: "{{ item }}"
    state: started
    enabled: yes
  with_items:
  - libvirtd-admin.socket
  - libvirtd-tls.socket
  - libvirtd.socket
  - libvirtd-ro.socket
  - libvirtd-tcp.socket
  - virtnetworkd-ro.socket
  - virtnetworkd-admin.socket
  - virtnetworkd.socket

- name: Install vagrant
  dnf:
    name: vagrant
    state: present

- name: Install wine & steam
  dnf:
    name: "{{ packages }}"
    state: present
  vars:
    packages:
      - wine
      - playonlinux
      - steam
