---

- name: Add Virtualbox GPG key
  ansible.builtin.rpm_key:
    state: present
    key: https://www.virtualbox.org/download/oracle_vbox.asc
- name: Add Virtualbox repo
  template:
    src: virtualbox.repo.j2
    dest: "/etc/yum.repos.d/virtualbox.repo"
    owner: root
    group: root
    mode: '0644'
- name: Install virtualbox
  dnf:
    name: "{{ packages }}"
    state: present
  vars:
    packages:
      - VirtualBox
      - kmod-VirtualBox
      - akmod-VirtualBox
      - virtualbox-guest-additions

- name: Add VScode GPG key
  ansible.builtin.rpm_key:
    state: present
    key: https://packages.microsoft.com/keys/microsoft.asc
- name: Add VScode repo
  template:
    src: vscode.repo.j2
    dest: "/etc/yum.repos.d/vscode.repo"
    owner: root
    group: root
    mode: '0644'
- name: Install VScode
  dnf:
    name: code
    state: present

- name: Add Google Cloud SDK GPG key
  ansible.builtin.rpm_key:
    state: present
    key: https://packages.cloud.google.com/yum/doc/yum-key.gpg
- name: Add Google Cloud SDK repo
  template:
    src: google-cloud-sdk.repo.j2
    dest: "/etc/yum.repos.d/google-cloud-sdk.repo"
    owner: root
    group: root
    mode: '0644'
- name: Install Google Cloud SDK
  dnf:
    name: google-cloud-sdk
    state: present
