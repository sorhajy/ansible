---
- name: Install flatpak
  apt:
    name: "{{ packages }}"
    state: present
  vars:
    packages:
      - flatpak
      - gnome-software-plugin-flatpak

- name: Add Flathub repo
  command: "flatpak remote-add --if-not-exists flathub https://dl.flathub.org/repo/flathub.flatpakrepo"

- name: Install Base packages
  flatpak:
    name: "{{ packages }}"
    state: present
  vars:
    packages:
      # - org.keepassxc.KeePassXC
      - org.electrum.electrum
      - net.cozic.joplin_desktop
      - com.leinardi.gst # GTK Stress Testing
      # - com.leinardi.gwe # Nvidia GPU util # ! Nvidia only
      # - org.libreoffice.LibreOffice
      - org.freecadweb.FreeCAD
      - net.scribus.Scribus
      - org.shadowsocks.qt5client
      # - md.obsidian.Obsidian # ! Proprietary

# - name: Install DevTools
#   flatpak:
#     name: "{{ packages }}"
#     state: present
#   vars:
#     packages:
      # - com.visualstudio.code # ? Unofficial
      # - com.getpostman.Postman
      # - com.jetbrains.PyCharm-Community
      # - io.dbeaver.DBeaverCommunity
      # - org.gnome.meld

- name: Install Social
  flatpak:
    name: "{{ packages }}"
    state: present
  vars:
    packages:
      - im.pidgin.Pidgin
      - chat.delta
      # - com.slack.Slack
      - org.jitsi.jitsi-meet
      # - org.mozilla.Thunderbird
      # - us.zoom.Zoom
      # - com.skype.Client
      # - net.jami.Jami

- name: Install Media
  flatpak:
    name: "{{ packages }}"
    state: present
  vars:
    packages:
      # - com.obsproject.Studio
      - org.audacityteam.Audacity
      # - org.blender.Blender
      # - fr.natron.Natron
      # - org.gimp.GIMP
      # - org.inkscape.Inkscape
      # - fr.handbrake.ghb
      # - org.videolan.VLC
      # - io.mpv.Mpv
